<metal:main use-macro="load: ../master.pt">
    <!-- Insere JavaScript -->
    <script metal:fill-slot="javascript" type="text/javascript" src=""></script>
    <div metal:fill-slot="conteudo" id="widgets">
        <div class="row-fluid">
            <div class="span12">
                <div id="base-explore"></div>
            </div>
        </div>
    </div>
</metal:main>
<script src="/static/js/lightbase/explorer.js"></script>
<script src="/static/ace-final/assets/js/jquery-ui-1.10.3.custom.min.js"></script>
<script src="/static/ace-final/assets/js/jquery.ui.touch-punch.min.js"></script>
<!--script src="/static/ace-final/assets/js/jquery.slimscroll.min.js"></script-->

<!--BOOTSRAP-EDITABLE STUFF-->
<link href="/static/bootstrap-editable-1.4.5/bootstrap-editable/css/bootstrap-editable.css" rel="stylesheet"/>
<link href="/static/bootstrap-editable-1.4.5/bootstrap-editable/img/clear.png" />
<link href="/static/bootstrap-editable-1.4.5/bootstrap-editable/img/loading.gif" />
<script src="/static/bootstrap-editable-1.4.5/bootstrap-editable/js/bootstrap-editable.min.js"></script>

<!--LBBROWSE STUFF-->
<script src="/static/js/lightbase/accordion.js"></script>
<script src="/static/js/lightbase/lib.js"></script>


    <link href="http://google-code-prettify.googlecode.com/svn/trunk/src/prettify.css" type="text/css" rel="stylesheet" />
    <script type="text/javascript" src="http://google-code-prettify.googlecode.com/svn/trunk/src/prettify.js"></script>
	
	<link rel="stylesheet" href="http://jquery-ui.googlecode.com/svn/tags/latest/themes/base/jquery-ui.css" type="text/css" media="all" /> 
	<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.3.2/jquery.min.js" type="text/javascript"></script> 
	<script src="http://jquery-ui.googlecode.com/svn/tags/latest/ui/minified/jquery-ui.min.js" type="text/javascript"></script> 




<script src="/static/js/lightbase/jquery.jsonviewer.js"></script>

<script type="text/javascript">
    $(document).ready(function() {
        var test_object = {
            test_number: 1,
            test_string: "test string",
            test_string2: new String("another test string"),
            test_date: new Date(),
            test_boolean: true,
            test_array: [[1, 2, 3], [4, 5, 6]],
            test_object: { a: 1, b: "2", another: { internal_array: [{ fate: true }, 34]} }
        }
        //$('#basic_usage').jsonviewer({ json_name: 'myobj', json_data: myobj });
        $('#base-explore').jsonviewer({ json_name: 'test', type_prefix: false, json_data: test_object });
    });
    $(function() {
    
        /*$('#explorer').sortable({
            connectWith: '#explorer',
            opacity:0.8,
            revert:true,
            forceHelperSize:true,
            placeholder: 'accordion-placeholder',
            forcePlaceholderSize:true,
            tolerance:'pointer'
        });*/
    
    });


/*id = data['id_reg'];
delete data['id_reg'];

view = new RegistryView(id, data);
overview = view.get_overview();
accordion = view.get_accordion(overview);

body = $('#explorer');
body[0].appendChild(accordion.html);

$.fn.editable.defaults.mode = 'inline';
//$.fn.editable.defaults.mode = 'popup';

$('.editable').each(function() { 
	// Makes everyone editable
	attr_id = $(this).attr('id');
	$('#' + attr_id).editable({
		//url: '/post',
		//title: 'XXXXXXXX'
		type: 'text',
		pk: 1,
		name: attr_id,
	});
});

function switch_editable(id){
	// Makes everyone (with :id) editable or uneditable
	$('.editable').each(function() { 
		var attr_id = $(this).attr('id');
		if (attr_id.split('-')[0] ==id){
			$('#' + attr_id).editable('toggleDisabled');
		}
	});
}

$('.editable').on('hidden', function(e, reason){
        if(reason === 'save' || reason === 'nochange') {
            var $next = $(this).closest('tr').next().find('.editable');

            if(true) {
                setTimeout(function() {
                    $next.editable('show');
                }, 300);
            } else {
                $next.focus();
            }
        }
   });*/


</script>

