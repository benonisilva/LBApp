<metal:main use-macro="load: ../master.pt">
    <!-- Insere JavaScript -->
    <script metal:fill-slot="javascript" type="text/javascript" src=""></script>
    <div metal:fill-slot="conteudo" id="widgets">
    <title>Explorar Bases</title>
        <div class="row-fluid">
            <div class="span12">


            <div id="modal-content" class="hide">
    <div id="modal-body">
<!-- put whatever you want to show up on bootbox here -->
        Wwowowowowwowow
    </div>
</div>



                <div id="controller-data" style="display: none">
                    ${explorer}
                </div>
                <div id="base-explorer" style="overflow: auto"></div>
            </div>
        </div>
    </div>
</metal:main>
<script src="/static/js/ace/bootbox.min.js"></script>
<script src="/static/ace-final/assets/js/jquery-ui-1.10.3.custom.min.js"></script>
<script src="/static/ace-final/assets/js/jquery.ui.touch-punch.min.js"></script>
<!--script src="/static/ace-final/assets/js/jquery.slimscroll.min.js"></script-->

<style>
    .alert {
    position:fixed;
    bottom:25%;
    right:2%;
    margin-bottom:0;
    font-size:1.2em;
    z-index:2000;
}
</style>
<!--BOOTSRAP-EDITABLE STUFF-->
<link href="/static/bootstrap-editable-1.4.6/bootstrap-editable/css/bootstrap-editable.css" rel="stylesheet"/>
<link href="/static/bootstrap-editable-1.4.6/bootstrap-editable/img/clear.png" />
<link href="/static/bootstrap-editable-1.4.6/bootstrap-editable/img/loading.gif" />
<script src="/static/bootstrap-editable-1.4.6/bootstrap-editable/js/bootstrap-editable.min.js"></script>

<script src="/static/js/lightbase/jquery.explorer.js"></script>

<script type="text/javascript">
    $(document).ready(function() {

        var explorer_data = JSON.parse($('#controller-data').text());

        var base = explorer_data['json_base']
        var registries = explorer_data['registries'];

        $.fn.editable.defaults.mode = 'inline';
        $('#base-explorer').explorer({ 
            base: base,
            registries: registries 
        });


        $(function() {
        
            /*$('#explorer').sortable({
                connectWith: '#explorer',
                opacity:0.8,
                revert:true,
                forceHelperSize:true,
                placeholder: 'accordion-placeholder',
                forcePlaceholderSize:true,
                tolerance:'pointer'
            });*/
        
        });


        function switch_editable(id){
            $('.editable').each(function() { 
                $(this).editable('toggleDisabled');
            });
        }

        $('.editable').on('hidden', function(e, reason){
                if(reason === 'save' || reason === 'nochange') {
                    var next = $(this).parent('td').next().find('.editable');
                    next.editable('show');
                }
           });
    });


</script>

