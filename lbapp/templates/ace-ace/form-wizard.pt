<metal:main use-macro="load: blank.pt">
 <!-- Insere JavaScript -->
    <script metal:fill-slot="javascript" type="text/javascript" src="static/tabelabootstrap.js"></script>

    <div metal:fill-slot="conteudo" id="widgets">

<header>
		<!--basic styles-->

		<!--<link href="static/ace-final/assets/css/bootstrap.min.css" rel="stylesheet" />
		<link href="static/ace-final/assets/css/bootstrap-responsive.min.css" rel="stylesheet" />
		<link rel="stylesheet" href="static/ace-final/assets/css/font-awesome.min.css" />-->

		<!--[if IE 7]>
		  <link rel="stylesheet" href="assets/css/font-awesome-ie7.min.css" />
		<![endif]-->

		<!--page specific plugin styles-->


		<!--fonts-->

		<!--<link rel="stylesheet" href="static/ace-final/assets/css/ace-fonts.css" />-->

		<!--ace styles-->

		<!--<link rel="stylesheet" href="static/ace-final/assets/css/ace.min.css" />
		<link rel="stylesheet" href="static/ace-final/assets/css/ace-responsive.min.css" />
		<link rel="stylesheet" href="static/ace-final/assets/css/ace-skins.min.css" />-->

		<!--[if lte IE 8]>
		  <link rel="stylesheet" href="assets/css/ace-ie.min.css" />
		<![endif]-->

		<!--inline styles related to this page-->
		<!--basic scripts-->

		<!--[if !IE]>-->

		<!--<script type="text/javascript">
			window.jQuery || document.write("<script src='static/ace-final/assets/js/jquery-2.0.3.min.js'>"+"<"+"/script>");
		</script>-->

		<!--<![endif]-->

		<!--[if IE]>
<script type="text/javascript">
 window.jQuery || document.write("<script src='assets/js/jquery-1.10.2.min.js'>"+"<"+"/script>");
</script>
<![endif]-->

		<!--<script type="text/javascript">
			if("ontouchend" in document) document.write("<script src='static/ace-final/assets/js/jquery.mobile.custom.min.js'>"+"<"+"/script>");
		</script>
		<script src="static/ace-final/assets/js/bootstrap.min.js"></script>-->

		<!--page specific plugin scripts-->


		<!--ace scripts-->

		<!--<script src="static/ace-final/assets/js/ace-elements.min.js"></script>
		<script src="static/ace-final/assets/js/ace.min.js"></script>-->

		<!--inline scripts related to this page-->

</header>


				<div class="page-content">
					<div class="page-header position-relative">
						<h1>
							Form Wizard
							<small>
								<i class="icon-double-angle-right"></i>
								and Validation
							</small>
						</h1>
					</div><!--/.page-header-->

					<div class="row-fluid">
						<div class="span12">
							<!--PAGE CONTENT BEGINS-->

							<h4 class="lighter">
								<i class="icon-hand-right icon-animated-hand-pointer blue"></i>
								<a href="#modal-wizard" data-toggle="modal" class="pink"> Wizard Inside a Modal Box </a>
							</h4>

							<div class="hr hr-18 hr-double dotted"></div>

							<div class="row-fluid" id="all-form">
								<div class="span12">
									<div class="widget-box">
										<div class="widget-header widget-header-blue widget-header-flat">
											<h4 class="lighter">New Item Wizard</h4>

										  	<!--<div class="widget-toolbar">
												<label>
													<small class="green">
														<b>Validation</b>
													</small>

													<input id="skip-validation" type="checkbox" class="ace-switch ace-switch-4" />
													<span class="lbl"></span>
												</label>
											</div>-->
										</div>

										<div class="widget-body">
											<div class="widget-main">
												<div class="row-fluid">
													<div id="fuelux-wizard" class="row-fluid hide" data-target="#step-container">
														<ul class="wizard-steps">
															<li data-target="#step1" class="active">
																<span class="step">1</span>
																<span class="title">Validation states</span>
															</li>

															<li data-target="#step2">
																<span class="step">2</span>
																<span class="title">Alerts</span>
															</li>

															<li data-target="#step3">
																<span class="step">3</span>
																<span class="title">Payment Info</span>
															</li>

															<li data-target="#step4">
																<span class="step">4</span>
																<span class="title">Other Info</span>
															</li>
														</ul>
													</div>

													<hr />
													<div class="step-content row-fluid position-relative" id="step-container">
														<div class="step-pane active" id="step1">
															<h3 class="lighter block green">Enter the following information</h3>

															<form class="form-horizontal" id="sample-form">
																<div class="control-group warning">
																	<label class="control-label" for="inputWarning">Input with warning</label>

																	<div class="controls">
																		<span class="span6 input-icon input-icon-right">
																			<input class="span12" type="text" id="inputWarning" />
																			<i class="icon-warning-sign"></i>
																		</span>
																		<span class="help-inline">Something may have gone wrong</span>
																	</div>
																</div>

																<div class="control-group error">
																	<label class="control-label" for="inputError">Error with tooltip</label>

																	<div class="controls">
																		<span class="span6 input-icon input-icon-right">
																			<input class="tooltip-error span12" type="text" id="inputError" data-rel="tooltip" title="Error info!" data-trigger="focus" />
																			<i class="icon-remove-sign"></i>
																		</span>
																		<span class="help-inline">Please correct the error</span>
																	</div>
																</div>

																<div class="control-group success">
																	<label class="control-label" for="inputSuccess">Input with success</label>

																	<div class="controls">
																		<span class="span6 input-icon input-icon-right">
																			<input class="span12" type="text" id="inputSuccess" />
																			<i class="icon-ok-sign"></i>
																		</span>
																		<span class="help-inline">Woohoo!</span>
																	</div>
																</div>

																<div class="control-group info">
																	<label class="control-label" for="inputInfo">Blue Input with Info</label>

																	<div class="controls">
																		<span class="span6 input-icon input-icon-right">
																			<input class="span12" type="text" id="inputInfo" />
																			<i class="icon-info-sign"></i>
																		</span>
																		<span class="help-inline">Info tip help!</span>
																	</div>
																</div>
															</form>

															<form class="form-horizontal" id="validation-form" method="get">
																<div class="control-group">
																	<label class="control-label" for="email">Nome:</label>

																	<div class="controls">
																		<div class="span6">
																			<input type="text" name="name" id="name" class="span6" />
																		</div>
																	</div>
																</div>

																<div class="control-group">
																	<label class="control-label" for="password">Descrição:</label>

																	<div class="controls">
																		<div class="span12">
																			<input class="span6" type="password" name="description" id="password" class="span4" />
																		</div>
																	</div>
																</div>

																<div class="hr hr-dotted"></div>

																<div class="control-group">
																	<label class="control-label">Exportar Indice:</label>

																	<div class="controls">
																		<span class="span12">
                                                                          <label>
                                                                              <input name="index_export" id="index_export" class="ace-switch ace-switch-6" type="checkbox" />
                                                                              <span class="lbl"></span>
                                                                          </label>
																		</span>
																	</div>
																</div>

																<div class="control-group">
																	<label class="control-label" for="URL">URL do indexador:</label>

																	<div class="controls">
																		<span class="span12">
																			<input class="span6" type="text" id="URL" name="index_url" />
																		</span>
																	</div>
																</div>


																<div class="control-group">
																	<label class="control-label" for="name">Tempo de espera da indexação:</label>
                                                                        <div class="controls">
                                                                            <span class="span12">
                                                                                <input name="index_time" type="text" class="input-mini" id="spinner1" />
                                                                                <div class="space-6"></div>
                                                                            </span>
                                                                        </div>
																</div>

																<!--<div class="control-group">
																	<label class="control-label" for="phone">Phone Number:</label>

																	<div class="controls">
																		<div class="span3 input-prepend">
																			<span class="add-on">
																				<i class="icon-phone"></i>
																			</span>

																			<input class="span12" type="tel" id="phone" name="phone" />
																		</div>
																	</div>
																</div>-->

																<div class="hr hr-dotted"></div>

																<!--<div class="control-group">
																	<label class="control-label">Subscribe to</label>

																	<div class="controls">
																		<span class="span12">
																			<label>
																				<input name="subscription" value="1" type="checkbox" />
																				<span class="lbl"> Latest news and announcements</span>
																			</label>

																			<label>
																				<input name="subscription" value="2" type="checkbox" />
																				<span class="lbl"> Product offers and discounts</span>
																			</label>
																		</span>
																	</div>
																</div>

																<div class="control-group">
																	<label class="control-label">Gender</label>

																	<div class="controls">
																		<span class="span12">
																			<label class="blue">
																				<input name="gender" value="1" type="radio" />
																				<span class="lbl"> Male</span>
																			</label>

																			<label class="blue">
																				<input name="gender" value="2" type="radio" />
																				<span class="lbl"> Female</span>
																			</label>
																		</span>
																	</div>
																</div>-->

																<div class="control-group">
																	<label class="control-label">Extrair texto do documento:</label>

																	<div class="controls">
																		<span class="span12">
                                                                          <label>
                                                                              <input name="doc_extract" id="doc_extract" class="ace-switch ace-switch-6" type="checkbox" />
                                                                              <span class="lbl"></span>
                                                                          </label>

																		</span>
																	</div>
																</div>

																<div class="control-group">
																	<label class="control-label" for="name">Tempo de espera da extração:</label>
                                                                        <div class="controls">

                                                                            <span class="span12">
                                                                                <input name="extract_time" type="text" class="input-mini" id="spinner2" />
                                                                                <div class="space-6"></div>
                                                                            </span>
                                                                        </div>
																</div>

																<!--<div class="control-group">
																	<label class="control-label" for="state">State</label>

																	<div class="controls">
																		<span class="span12">
																			<select id="state" name="state" class="select2" data-placeholder="Click to Choose...">
																				<option value=""></option>
																				<option value="AL">Alabama</option>
																				<option value="AK">Alaska</option>
																				<option value="AZ">Arizona</option>
																				<option value="AR">Arkansas</option>
																				<option value="CA">California</option>
																				<option value="CO">Colorado</option>
																				<option value="CT">Connecticut</option>
																				<option value="DE">Delaware</option>
																				<option value="FL">Florida</option>
																				<option value="GA">Georgia</option>
																				<option value="HI">Hawaii</option>
																				<option value="ID">Idaho</option>
																				<option value="IL">Illinois</option>
																				<option value="IN">Indiana</option>
																				<option value="IA">Iowa</option>
																				<option value="KS">Kansas</option>
																				<option value="KY">Kentucky</option>
																				<option value="LA">Louisiana</option>
																				<option value="ME">Maine</option>
																				<option value="MD">Maryland</option>
																				<option value="MA">Massachusetts</option>
																				<option value="MI">Michigan</option>
																				<option value="MN">Minnesota</option>
																				<option value="MS">Mississippi</option>
																				<option value="MO">Missouri</option>
																				<option value="MT">Montana</option>
																				<option value="NE">Nebraska</option>
																				<option value="NV">Nevada</option>
																				<option value="NH">New Hampshire</option>
																				<option value="NJ">New Jersey</option>
																				<option value="NM">New Mexico</option>
																				<option value="NY">New York</option>
																				<option value="NC">North Carolina</option>
																				<option value="ND">North Dakota</option>
																				<option value="OH">Ohio</option>
																				<option value="OK">Oklahoma</option>
																				<option value="OR">Oregon</option>
																				<option value="PA">Pennsylvania</option>
																				<option value="RI">Rhode Island</option>
																				<option value="SC">South Carolina</option>
																				<option value="SD">South Dakota</option>
																				<option value="TN">Tennessee</option>
																				<option value="TX">Texas</option>
																				<option value="UT">Utah</option>
																				<option value="VT">Vermont</option>
																				<option value="VA">Virginia</option>
																				<option value="WA">Washington</option>
																				<option value="WV">West Virginia</option>
																				<option value="WI">Wisconsin</option>
																				<option value="WY">Wyoming</option>
																			</select>
																		</span>
																	</div>
																</div>

																<div class="control-group">
																	<label class="control-label" for="platform">Platform</label>

																	<div class="controls">
																		<span class="span12">
																			<select class="span3" id="platform" name="platform">
																				<option value="">State</option>
																				<option value="linux">Linux</option>
																				<option value="windows">Windows</option>
																				<option value="mac">Mac OS</option>
																				<option value="ios">iOS</option>
																				<option value="android">Android</option>
																			</select>
																		</span>
																	</div>
																</div>

																<div class="control-group">
																	<label class="control-label" for="comment">Comment</label>

																	<div class="controls">
																		<span class="span12">
																			<textarea class="span8" name="comment" id="comment"></textarea>
																		</span>
																	</div>
																</div>

																<div class="control-group">
																	<div class="controls">
																		<span class="span6">
																			<label>
																				<input name="agree" id="agree" type="checkbox" />
																				<span class="lbl"> I accept the policy</span>
																			</label>
																		</span>
																	</div>
																</div>-->


<!--<button type="submit">next-next</button>-->
															</form>
														</div>

														<div class="step-pane" id="step2">
															<div class="row-fluid">




                                <!-- BASE STRUCTURE AND CONTEXT -->

           <div id="base-widget">
    <header>
        <link rel="stylesheet" type="text/css" href="static/nestable-theme/jquery.nestable.css">
        <style>
            .error{
                color:#db8978;
            }
        </style>
    </header>
    <div class="row-fluid">
        <div class="span12">
            <textarea id="nestable-output" class="m-wrap span12"></textarea>
        </div>

        <div id="auto-append-info" class="control-group info" hidden>
            <div class="controls">
                <span class="span6 input-icon input-icon-right">
                <input class="span12" type="text" value="Auto indentação ativada">
                <i class="icon-info-sign"></i>
                </span>
            </div>
        </div>

    </div>
    <div class="row-fluid">
        <div class="span7">
            <div class="widget-box">
                <div class="widget-header">
                    <h4>Estrutura da Base</h4>
                    <span class="widget-toolbar">
                    <a href="#" data-action="collapse">
                    <i class="icon-chevron-up"></i>
                    </a>
                    </span>
                </div>
                <div class="widget-body">

                <div class="widget-toolbox">
                                       <div class="btn-toolbar">
                                            <div class="btn-group">
                                                <button class="btn btn-small btn-info" data-action="create-field">
                                                    <i class="icon-plus"></i>
                                                     Campo
                                                </button>
                                                <button class="btn btn-small btn-info" data-action="create-group">
                                                    <i class="icon-plus bigger-110"></i>
                                                    Grupo
                                                </button>
                                            </div>
                                            <div class="btn-group">
                                                <button class="btn btn-small" data-action="collapse-all">
                                                    <i class="icon-collapse-top"></i>
                                                     Colapsar
                                                </button>
                                                <button class="btn btn-small" data-action="expand-all">
                                                    <i class="icon-collapse"></i>
                                                    Expandir
                                                </button>
                                            </div>
                                            <div class="btn-group">
                                                <button class="btn btn-small btn-danger" data-action="remove-element">
                                                    <i class="icon-remove"></i>
                                                    Deletar
                                                </button>
                                            </div>
                                            <div class="btn-group open">
                                                <button data-toggle="dropdown" class="btn btn-small btn-grey dropdown-toggle">
                                                    <i class="icon-caret-down icon-only bigger-110"></i>
                                                </button>
                                                <ul class="dropdown-menu pull-right dropdown-caret dropdown-close">
                                                    <li>
                                                        <a href='javascript:void(0);' data-action="auto-append">
                                                            <i class="icon-indent-right"></i>
                                                            Auto indentação
                                                        </a>
                                                    </li>
                                                </ul>
                                             </div>


                                        </div>
                                    </div>
                    <div id="div-to-scroll" class="widget-main" style="height:425px; overflow:auto;">
                        <!-- nestable list -->
                        <div class="dd" id="nestable">
                            <ol id="base-structure" class="dd-list"></ol>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="span5">
            <div class="widget-box">
                <div class="widget-header">
                    <h4>Propriedades</h4>
                    <span class="widget-toolbar">
                    <a href="#" data-action="collapse">
                    <i class="icon-chevron-up"></i>
                    </a>
                    </span>
                </div>
                <div class="widget-body">
                    <div id="base-context" class="widget-main" style="overflow:auto;">
                    </div>
                </div>
            </div>
        </div>
    </div>
</div> 

                                <!-- BASE STRUCTURE AND CONTEXT ENDS-->





															</div>
														</div>

														<div class="step-pane" id="step3">
															<div class="center">
																<h3 class="blue lighter">This is step 3</h3>
															</div>
														</div>

														<div class="step-pane" id="step4">
															<div class="center">
																<h3 class="green">Congrats!</h3>
																Your product is ready to ship! Click finish to continue!
															</div>
														</div>
													</div>

													<hr />
													<div class="row-fluid wizard-actions">
														<button class="btn btn-prev">
															<i class="icon-arrow-left"></i>
															Prev
														</button>

														<button id="button-submit" type="submit" class="btn btn-success btn-next" data-last="Finish ">
															Next
															<i class="icon-arrow-right icon-on-right"></i>
														</button>
													</div>
												</div>
											</div><!--/widget-main-->
										</div><!--/widget-body-->
									</div>
								</div>
							</div>

							<div id="modal-wizard" class="modal hide">
								<div class="modal-header" data-target="#modal-step-contents">
									<ul class="wizard-steps clearfix">
										<li data-target="#modal-step1" class="active">
											<span class="step">1</span>
											<span class="title">Validation states</span>
										</li>

										<li data-target="#modal-step2">
											<span class="step">2</span>
											<span class="title">Alerts</span>
										</li>

										<li data-target="#modal-step3">
											<span class="step">3</span>
											<span class="title">Payment Info</span>
										</li>

										<li data-target="#modal-step4">
											<span class="step">4</span>
											<span class="title">Other Info</span>
										</li>
									</ul>
								</div>

								<div class="modal-body step-content" id="modal-step-contents">
									<div class="step-pane active" id="modal-step1">
										<div class="center">
											<h4 class="blue">Step 1</h4>
										</div>
									</div>

									<div class="step-pane" id="modal-step2">
										<div class="center">
											<h4 class="blue">Step 2</h4>
										</div>
									</div>

									<div class="step-pane" id="modal-step3">
										<div class="center">
											<h4 class="blue">Step 3</h4>
										</div>
									</div>

									<div class="step-pane" id="modal-step4">
										<div class="center">
											<h4 class="blue">Step 4</h4>
										</div>
									</div>
								</div>

								<div class="modal-footer wizard-actions">
									<button class="btn btn-small btn-prev">
										<i class="icon-arrow-left"></i>
										Prev
									</button>

									<button class="btn btn-success btn-small btn-next" data-last="Finish ">
										Next
										<i class="icon-arrow-right icon-on-right"></i>
									</button>

									<button class="btn btn-danger btn-small pull-left" data-dismiss="modal">
										<i class="icon-remove"></i>
										Cancel
									</button>
								</div>
							</div><!--PAGE CONTENT ENDS-->
						</div><!--/.span-->
					</div><!--/.row-fluid-->
				</div><!--/.page-content-->
</div>
</metal:main>


		<script src="static/ace-final/assets/js/fuelux/fuelux.wizard.min.js"></script>
		<script src="static/ace-final/assets/js/jquery.validate.min.js"></script>
        <script type="text/javascript" src="static/base_form.js"></script>
        <script src="static/codigo-nestable/Nestable/jquery.nestable.js"></script>
		<script src="static/ace-final/assets/js/additional-methods.min.js"></script>
		<script src="static/ace-final/assets/js/bootbox.min.js"></script>


                                    <!-- counting -->

        <script src="static/ace-final/assets/js/jquery-ui-1.10.3.custom.min.js"></script>
        <script src="static/ace-final/assets/js/chosen.jquery.min.js"></script>
        <script src="static/ace-final/assets/js/fuelux/fuelux.spinner.min.js"></script>
        <script src="static/ace-final/assets/js/jquery.autosize-min.js"></script>
        <script src="static/ace-final/assets/js/jquery.maskedinput.min.js"></script>


		<script type="text/javascript">
			$(function() {


              var x = {   
					errorElement: 'span',
					errorClass: 'help-inline',
					focusInvalid: false,
					rules: {
						name: {
							required: true,
						},
						description: {
							required: true,
						},
						index_export: {
                            required: false
						},
						index_url: {
							required: {
                                     depends: function(element){
                                                  var checked = false;
                                                  if ($("#index_export:checked").val() !== undefined){
                                                     checked = true
                                                  }
                                                  return checked
                                              }                                        
                            }
						},
						index_time: {
                            required: false
						},
						document_extract: {
							required: false
							
						},
						extraction_time: {
							required: false
						},
						state: {
							required: false
						},
						platform: {
							required: false
						},
						subscription: {
							required: false
						},
						gender: 'required',
						agree: 'required'
					},
			
					messages: {
						name: {
							required: "É necessario preencher o campo."
						},
						description: {
							required: "É necessario preencher o campo."
						},
                        index_url: {
                            required: "É necessario preencher o campo."
                        }
					},
			
					invalidHandler: function (event, validator) { //display error alert on form submit   
						$('.alert-error', $('.login-form')).show();
					},
			
					highlight: function (e) {
						$(e).closest('.control-group').removeClass('info').addClass('error');
					},
			
					success: function (e) {
						$(e).closest('.control-group').removeClass('error').addClass('info');
						$(e).remove();
					},
			
					errorPlacement: function (error, element) {
						if(element.is(':checkbox') || element.is(':radio')) {
							var controls = element.closest('.controls');
							if(controls.find(':checkbox,:radio').length > 1) controls.append(error);
							else error.insertAfter(element.nextAll('.lbl:eq(0)').eq(0));
						}
						else if(element.is('.chzn-select')) {
							error.insertAfter(element.siblings('[class*="chzn-container"]:eq(0)'));
						}
						else error.insertAfter(element);
					},
			
					submitHandler: function (form) {
					},
					invalidHandler: function (form) {
					}
                };

				$('[data-rel=tooltip]').tooltip();
			
			
				var $validation = true;
				$('#fuelux-wizard').ace_wizard().on('change' , function(e, info){
					if(info.step == 1 && $validation) {
						if(!$('#validation-form').valid()) return false;
					}
				}).on('finished', function(e) {
					bootbox.dialog("Thank you! Your information was successfully saved!", [{
						"label" : "OK",
						"class" : "btn-small btn-primary",
						}]
					);
				}).on('stepclick', function(e){
					//return false;//prevent clicking on steps
				});
			
			
				$('#sample-form').hide();
			    $('#validation-form').show();
				/*$('#skip-validation').removeAttr('checked').on('click', function(){
					$validation = this.checked;
					if(this.checked) {
						$('#sample-form').hide();
						$('#validation-form').show();
					}
					else {
						$('#validation-form').hide();
						$('#sample-form').show();
					}
				});*/
			
			
			
				//documentation : http://docs.jquery.com/Plugins/Validation/validate
			
			
				$.mask.definitions['~']='[+-]';
				$('#phone').mask('(999) 999-9999');
			
				jQuery.validator.addMethod("phone", function (value, element) {
					return this.optional(element) || /^\(\d{3}\) \d{3}\-\d{4}( x\d{1,6})?$/.test(value);
				}, "Enter a valid phone number.");

				$('#validation-form').validate(x);
			
				
				
				
				$('#modal-wizard .modal-header').ace_wizard();
				$('#modal-wizard .wizard-actions .btn[data-dismiss=modal]').removeAttr('disabled');
                

                $('#validation-form').submit(function() {
                    var formdata = $("#validation-form").serializeArray();
                    var returnArray = new Object();
                    $.each(formdata, function(i, v){
                        if (v.name == "doc_extract"){
                            v.value = true
                        }
                        if (v.name == "index_export"){
                            v.value = true
                        }
                        returnArray[v.name] = v.value;
                    });
                        if (!("doc_extract" in returnArray)){
                            returnArray["doc_extract"] = false;
                        }
                        if (!("index_export" in returnArray)){
                            returnArray["index_export"] = false;
                        }
                    console.log(JSON.stringify(returnArray));
                      return false;
                });

                $("#button-submit").click(function(){
                    $('#validation-form').submit();
                });


        
                }); 
		</script>


		<script type="text/javascript">
			$(function() {
				$('#id-disable-check').on('click', function() {
					var inp = $('#form-input-readonly').get(0);
					if(inp.hasAttribute('disabled')) {
						inp.setAttribute('readonly' , 'true');
						inp.removeAttribute('disabled');
						inp.value="This text field is readonly!";
					}
					else {
						inp.setAttribute('disabled' , 'disabled');
						inp.removeAttribute('readonly');
						inp.value="This text field is disabled!";
					}
				});
			
			
				$(".chzn-select").chosen(); 
				
				$('[data-rel=tooltip]').tooltip({container:'body'});
				$('[data-rel=popover]').popover({container:'body'});
				
				$('textarea[class*=autosize]').autosize({append: "\n"});
				$('textarea[class*=limited]').each(function() {
					var limit = parseInt($(this).attr('data-maxlength')) || 100;
					$(this).inputlimiter({
						"limit": limit,
						remText: '%n character%s remaining...',
						limitText: 'max allowed : %n.'
					});
				});
				
				$.mask.definitions['~']='[+-]';
				$('.input-mask-date').mask('99/99/9999');
				$('.input-mask-phone').mask('(999) 999-9999');
				$('.input-mask-eyescript').mask('~9.99 ~9.99 999');
				$(".input-mask-product").mask("a*-999-a999",{placeholder:" ",completed:function(){alert("You typed the following: "+this.val());}});
				
				
				
				$( "#input-size-slider" ).css('width','200px').slider({
					value:1,
					range: "min",
					min: 1,
					max: 6,
					step: 1,
					slide: function( event, ui ) {
						var sizing = ['', 'input-mini', 'input-small', 'input-medium', 'input-large', 'input-xlarge', 'input-xxlarge'];
						var val = parseInt(ui.value);
						$('#form-field-4').attr('class', sizing[val]).val('.'+sizing[val]);
					}
				});
			
				$( "#input-span-slider" ).slider({
					value:1,
					range: "min",
					min: 1,
					max: 11,
					step: 1,
					slide: function( event, ui ) {
						var val = parseInt(ui.value);
						$('#form-field-5').attr('class', 'span'+val).val('.span'+val).next().attr('class', 'span'+(12-val)).val('.span'+(12-val));
					}
				});
				
				
				$( "#slider-range" ).css('height','200px').slider({
					orientation: "vertical",
					range: true,
					min: 0,
					max: 100,
					values: [ 17, 67 ],
					slide: function( event, ui ) {
						var val = ui.values[$(ui.handle).index()-1]+"";
			
						if(! ui.handle.firstChild ) {
							$(ui.handle).append("<div class='tooltip right in' style='display:none;left:15px;top:-8px;'><div class='tooltip-arrow'></div><div class='tooltip-inner'></div></div>");
						}
						$(ui.handle.firstChild).show().children().eq(1).text(val);
					}
				}).find('a').on('blur', function(){
					$(this.firstChild).hide();
				});
				
				$( "#slider-range-max" ).slider({
					range: "max",
					min: 1,
					max: 10,
					value: 2
				});
				
				$( "#eq > span" ).css({width:'90%', 'float':'left', margin:'15px'}).each(function() {
					// read initial values from markup and remove that
					var value = parseInt( $( this ).text(), 10 );
					$( this ).empty().slider({
						value: value,
						range: "min",
						animate: true
						
					});
				});
			
				
				$('#id-input-file-1 , #id-input-file-2').ace_file_input({
					no_file:'No File ...',
					btn_choose:'Choose',
					btn_change:'Change',
					droppable:false,
					onchange:null,
					thumbnail:false //| true | large
					//whitelist:'gif|png|jpg|jpeg'
					//blacklist:'exe|php'
					//onchange:''
					//
				});
				
				$('#id-input-file-3').ace_file_input({
					style:'well',
					btn_choose:'Drop files here or click to choose',
					btn_change:null,
					no_icon:'icon-cloud-upload',
					droppable:true,
					thumbnail:'small'
					//,icon_remove:null//set null, to hide remove/reset button
					/**,before_change:function(files, dropped) {
						//Check an example below
						//or examples/file-upload.html
						return true;
					}*/
					/**,before_remove : function() {
						return true;
					}*/
					,
					preview_error : function(filename, error_code) {
						//name of the file that failed
						//error_code values
						//1 = 'FILE_LOAD_FAILED',
						//2 = 'IMAGE_LOAD_FAILED',
						//3 = 'THUMBNAIL_FAILED'
						//alert(error_code);
					}
			
				}).on('change', function(){
					//console.log($(this).data('ace_input_files'));
					//console.log($(this).data('ace_input_method'));
				});
				
			
				//dynamically change allowed formats by changing before_change callback function
				$('#id-file-format').removeAttr('checked').on('change', function() {
					var before_change
					var btn_choose
					var no_icon
					if(this.checked) {
						btn_choose = "Drop images here or click to choose";
						no_icon = "icon-picture";
						before_change = function(files, dropped) {
							var allowed_files = [];
							for(var i = 0 ; i < files.length; i++) {
								var file = files[i];
								if(typeof file === "string") {
									//IE8 and browsers that don't support File Object
									if(! (/\.(jpe?g|png|gif|bmp)$/i).test(file) ) return false;
								}
								else {
									var type = $.trim(file.type);
									if( ( type.length > 0 && ! (/^image\/(jpe?g|png|gif|bmp)$/i).test(type) )
											|| ( type.length == 0 && ! (/\.(jpe?g|png|gif|bmp)$/i).test(file.name) )//for android's default browser which gives an empty string for file.type
										) continue;//not an image so don't keep this file
								}
								
								allowed_files.push(file);
							}
							if(allowed_files.length == 0) return false;
			
							return allowed_files;
						}
					}
					else {
						btn_choose = "Drop files here or click to choose";
						no_icon = "icon-cloud-upload";
						before_change = function(files, dropped) {
							return files;
						}
					}
					var file_input = $('#id-input-file-3');
					file_input.ace_file_input('update_settings', {'before_change':before_change, 'btn_choose': btn_choose, 'no_icon':no_icon})
					file_input.ace_file_input('reset_input');
				});
			
			
			
			
				$('#spinner1').ace_spinner({value:0,min:0,max:200,step:10, btn_up_class:'btn-info' , btn_down_class:'btn-info'})
				.on('change', function(){
					//alert(this.value)
				});

				$('#spinner2').ace_spinner({value:0,min:0,max:200,step:10, btn_up_class:'btn-info' , btn_down_class:'btn-info'})
				.on('change', function(){
					//alert(this.value)
				});
				//$('#spinner2').ace_spinner({value:0,min:0,max:10000,step:100, icon_up:'icon-caret-up', icon_down:'icon-caret-down'});
				$('#spinner3').ace_spinner({value:0,min:-100,max:100,step:10, icon_up:'icon-plus', icon_down:'icon-minus', btn_up_class:'btn-success' , btn_down_class:'btn-danger'});
			
			
				
				//we could just set the data-provide="tag" of the element inside HTML, but IE8 fails!
				/////////
				$('#modal-form input[type=file]').ace_file_input({
					style:'well',
					btn_choose:'Drop files here or click to choose',
					btn_change:null,
					no_icon:'icon-cloud-upload',
					droppable:true,
					thumbnail:'large'
				})
				
				//chosen plugin inside a modal will have a zero width because the select element is originally hidden
				//and its width cannot be determined.
				//so we set the width after modal is show
				$('#modal-form').on('show', function () {
					$(this).find('.chzn-container').each(function(){
						$(this).find('a:first-child').css('width' , '200px');
						$(this).find('.chzn-drop').css('width' , '210px');
						$(this).find('.chzn-search input').css('width' , '200px');
					});
				})
				/**
				//or you can activate the chosen plugin after modal is shown
				//this way select element has a width now and chosen works as expected
				$('#modal-form').on('shown', function () {
					$(this).find('.modal-chosen').chosen();
				})
				*/
			
			});
		</script>


        <script type="text/javascript">
        $(document).ready(function()
        {
            $('button[data-action="create-field"]').click(function(){
                base.create_field(remand=false, check_valid=true);
            });
            $('button[data-action="create-group"]').click(function(){
                base.create_group();
            });
            $('button[data-action="expand-all"]').click(function(){
                $('.dd').nestable('expandAll');
            });
            $('button[data-action="collapse-all"]').click(function(){
                $('.dd').nestable('collapseAll');
            });
            $('button[data-action="remove-element"]').click(function(){
                base.remove_element();
            });
            $('a[data-action="auto-append"]').click(function(){
                if (base.auto_append){
                    base.auto_append = false;
                    $('#auto-append-info').hide();
                }
                else{
                    base.auto_append = true;
                    $('#auto-append-info').show();
                }
            });

            // Initialize first field
            base.create_field();

            var updateOutput = function(e)
            {
                var list   = e.length ? e : $(e.target),
                    output = list.data('output');
                if (window.JSON) {
                    output.val(window.JSON.stringify(list.nestable('serialize')));//, null, 2));
                } else {
                    output.val('JSON browser support required for this demo.');
                }
            };

           var drop_callback = function(drop_info){
                // Select list-item and focus on form
                base.context.focus_on('base-context-' + drop_info.sourceId + '-form');
                if(base.auto_append){
                    if(base.current_item.is_group){
                        base.auto_append_el = $(base.current_item).children('ol')[0]; 
                    }
                    else{
                        base.auto_append_el = undefined; 
                    }
                }

            }

            // activate Nestable for list 1
            $('#nestable').nestable({
                group: 1,
                maxDepth: 10,
                dropCallback: drop_callback
            })
            .on('change', updateOutput);

            // output initial serialised data
            updateOutput($('#nestable').data('output', $('#nestable-output')));


        });

        </script>
